import{_ as w,r as d,o as i,c as n,a as e,n as f,w as S,v as B,t as R,b as V,p as L,d as M}from"./index-afc45995.js";const m=r=>(L("data-v-7c359da4"),r=r(),M(),r),U={class:"outBlock"},x={class:"btnBlock"},D=["disabled"],N=["disabled"],T={class:"videoNameBlock"},C=m(()=>e("label",{for:"vdName"},"影片名稱",-1)),E={key:0},I=m(()=>e("h3",{class:"title"},"預覽畫面",-1)),j={class:"statusMessageStyle"},H={key:1},O=m(()=>e("h2",{class:"title"},"錄影完成",-1)),z=["href","download"],A=["src"],q={key:2},F={__name:"Home",setup(r){let s=null,l=d([]);const a=d(null),u=d(""),v=d(""),h=d(null),_=d("錄製影片");async function b(){try{const t=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}),o=await navigator.mediaDevices.getUserMedia({audio:!0}),c=new MediaStream;return t.getVideoTracks().forEach(p=>c.addTrack(p)),o.getAudioTracks().forEach(p=>c.addTrack(p)),c}catch(t){return console.error("Error merging streams:",t),null}}const k=async()=>{alert("選 整個螢幕畫面 並勾選 分享系統音訊");try{const t=await b();t&&(l.value=[],h.value.srcObject=t,s=new MediaRecorder(t),s.ondataavailable=o=>{o.data.size>0&&l.value.push(o.data)},s.onstart=()=>{u.value="正在錄影...",a.value=!0},s.onstop=()=>{u.value="",a.value=!1;const o=new Blob(l.value,{type:"video/mp4"});v.value=URL.createObjectURL(o)},s.start())}catch(t){console.error("無法啟動錄影：",t)}},y=()=>{s&&s.state!=="inactive"&&(s.stop(),g())},g=()=>{const t=new Blob(l.value,{type:"video/mp4"});URL.createObjectURL(t)};return(t,o)=>(i(),n("div",U,[e("div",x,[e("button",{id:"startButton",onClick:k,disabled:a.value,style:f({background:a.value?"#c5c5c5":"#ff5959"})},"開始錄影",12,D),e("button",{id:"stopButton",onClick:y,disabled:!a.value,style:f({background:a.value?"#097424":"#c5c5c5"})},"停止錄影",12,N),e("div",T,[C,S(e("input",{id:"vdName",type:"text","onUpdate:modelValue":o[0]||(o[0]=c=>_.value=c)},null,512),[[B,_.value]])])]),e("div",null,[a.value===!0||a.value===null?(i(),n("div",E,[I,e("p",j,R(u.value),1),e("video",{id:"preview",ref_key:"previewVideo",ref:h,src:"",autoplay:""},null,512)])):a.value===!1?(i(),n("div",H,[O,e("a",{ref:"downloadLink",class:"downloadLinkStyle",href:v.value,download:_.value},"下載影片",8,z),e("video",{id:"recordedVideo",ref:"recordedVideo",controls:"",src:v.value},null,8,A)])):a.value===null?(i(),n("div",q)):V("",!0)])]))}},J=w(F,[["__scopeId","data-v-7c359da4"]]);export{J as default};
